{"ast":null,"code":"import _classCallCheck from \"/Users/rozenmoon/Desktop/drawing_react_app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rozenmoon/Desktop/drawing_react_app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rozenmoon/Desktop/drawing_react_app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rozenmoon/Desktop/drawing_react_app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rozenmoon/Desktop/drawing_react_app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/rozenmoon/Desktop/drawing_react_app/src/UI/Canvas/Canvas.js\";\nimport React, { Component } from 'react';\nimport classes from './Canvas.css';\nimport Erase from '../Tools/Erase/Erase';\n\nvar Canvas =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Canvas, _Component);\n\n  function Canvas(props) {\n    var _this;\n\n    _classCallCheck(this, Canvas);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Canvas).call(this, props));\n    _this.state = {\n      mousedown: false,\n      startX: 0,\n      startY: 0,\n      endX: 0,\n      endY: 0,\n      one_state_back: null,\n      current_state: null,\n      quardStartX: 0,\n      quardStartY: 0,\n      activity: false\n    };\n\n    _this.toggleActivityHandeller = function () {\n      return !_this.state.activity;\n    };\n\n    _this.MouseDown = function (e) {\n      e.persist();\n\n      var statei = _this.ctx.getImageData(0, 0, _this.canvas.width, _this.canvas.height);\n\n      _this.setState({\n        activity: _this.toggleActivityHandeller(),\n        mousedown: true,\n        startX: e.nativeEvent.offsetX,\n        startY: e.nativeEvent.offsetY,\n        one_state_back: statei,\n        endX: e.nativeEvent.offsetX,\n        endY: e.nativeEvent.offsetY\n      });\n    };\n\n    _this.MouseEnter = function (e) {\n      e.persist();\n\n      _this.props.CanvasMouseEnter(true);\n    };\n\n    _this.MouseMove = function (e) {\n      e.persist();\n\n      if (_this.state.activity && _this.state.mousedown) {\n        if (_this.props.Task == \"Line\" || _this.props.Task == \"Shape\") {\n          _this.clearCanvas();\n        }\n\n        _this.activationFunction(e);\n      }\n\n      if (_this.state.activity && _this.props.LineTask === \"QuardLine\") _this.activationFunction(e);\n    };\n\n    _this.MouseUp = function (e) {\n      if (_this.props.Task == \"Line\" || _this.props.Task == \"Shape\") {\n        _this.clearCanvas();\n      }\n\n      e.persist();\n\n      _this.setState({\n        activity: false,\n        mousedown: false,\n        endX: e.nativeEvent.offsetX,\n        endY: e.nativeEvent.offsetY\n      }, function () {\n        return _this.activationFunction(e);\n      });\n    };\n\n    _this.activationFunction = function (e) {\n      if (_this.props.Task === \"Line\") {\n        if (_this.props.LineTask === \"Line\") return _this.drawLine(e);else if (_this.props.LineTask === \"QuardLine\") return _this.drawQuard(e);\n      } else if (_this.props.Task === \"Pencil\") {\n        return _this.pencil(e);\n      } else if (_this.props.Task === \"Shape\") {\n        if (_this.props.ShapeTask === \"Rectangle\") return _this.drawRect(e);else if (_this.props.ShapeTask === \"Circle\") return _this.drawCircle(e);\n      } else if (_this.props.Task === \"Erase\") {\n        return _this.eraser(e);\n      }\n    };\n\n    _this.clearCanvas = function () {\n      _this.setState(function () {\n        return {\n          current_state: _this.state.one_state_back\n        };\n      });\n\n      _this.ctx.clearRect(0, 0, _this.canvas.width, _this.canvas.height);\n\n      _this.ctx.putImageData(_this.state.one_state_back, 0, 0);\n    };\n\n    _this.drawLine = function (e) {\n      e.persist();\n\n      _this.setState({\n        endX: e.nativeEvent.offsetX,\n        endY: e.nativeEvent.offsetY\n      }, function () {\n        _this.ctx.beginPath();\n\n        _this.ctx.moveTo(_this.state.startX, _this.state.startY);\n\n        _this.ctx.lineTo(_this.state.endX, _this.state.endY);\n\n        _this.ctx.lineWidth = _this.props.size;\n\n        _this.ctx.stroke();\n      });\n\n      _this.setState(function () {\n        return {\n          current_state: _this.ctx.getImageData(0, 0, _this.canvas.width, _this.canvas.height)\n        };\n      });\n    };\n\n    _this.drawCircle = function (e) {\n      console.log(\"Circle\");\n      e.persist();\n\n      _this.setState({\n        endX: e.nativeEvent.offsetX,\n        endY: e.nativeEvent.offsetY\n      }, function () {\n        _this.ctx.beginPath();\n\n        _this.ctx.arc(_this.state.startX, _this.state.startY, _this.Distance(), 0, 2 * Math.PI);\n\n        _this.ctx.lineWidth = _this.props.size;\n\n        _this.ctx.stroke();\n      });\n\n      _this.setState(function () {\n        return {\n          current_state: _this.ctx.getImageData(0, 0, _this.canvas.width, _this.canvas.height)\n        };\n      });\n    };\n\n    _this.drawRect = function (e) {\n      e.persist();\n\n      _this.setState({\n        endX: e.nativeEvent.offsetX,\n        endY: e.nativeEvent.offsetY\n      }, function () {\n        _this.ctx.beginPath();\n\n        _this.ctx.rect(_this.state.startX, _this.state.startY, _this.state.endX - _this.state.startX, _this.state.endY - _this.state.startY);\n\n        _this.ctx.lineWidth = _this.props.size;\n\n        _this.ctx.stroke();\n      });\n\n      _this.setState(function () {\n        return {\n          current_state: _this.ctx.getImageData(0, 0, _this.canvas.width, _this.canvas.height)\n        };\n      });\n    };\n\n    _this.drawQuard = function (e) {\n      e.persist();\n\n      _this.setState({\n        quardStartX: e.nativeEvent.offsetX,\n        quardStartY: e.nativeEvent.offsetY\n      }, function () {\n        _this.ctx.beginPath();\n\n        _this.ctx.moveTo(_this.state.startX, _this.state.startY);\n\n        _this.ctx.quadraticCurveTo(_this.state.quardStartX, _this.state.quardStartY, _this.state.endX, _this.state.endY);\n\n        _this.ctx.lineWidth = _this.props.size;\n\n        _this.ctx.stroke();\n      });\n\n      _this.setState(function () {\n        return {\n          current_state: _this.ctx.getImageData(0, 0, _this.canvas.width, _this.canvas.height)\n        };\n      });\n    };\n\n    _this.pencil = function (e) {\n      e.persist();\n\n      _this.setState({\n        startX: _this.state.endX,\n        startY: _this.state.endY,\n        endX: e.nativeEvent.offsetX,\n        endY: e.nativeEvent.offsetY\n      }, function () {\n        _this.ctx.beginPath();\n\n        _this.ctx.moveTo(_this.state.startX, _this.state.startY);\n\n        _this.ctx.lineTo(_this.state.endX, _this.state.endY);\n\n        _this.ctx.lineWidth = _this.props.size;\n\n        _this.ctx.stroke();\n      });\n\n      _this.setState(function () {\n        return {\n          current_state: _this.ctx.getImageData(0, 0, _this.canvas.width, _this.canvas.height)\n        };\n      });\n    };\n\n    _this.Distance = function () {\n      var radius = Math.sqrt(Math.pow(_this.state.startX - _this.state.endX, 2) + Math.pow(_this.state.startY - _this.state.endY, 2));\n      console.log(radius);\n      return radius;\n    };\n\n    _this.eraser = function (e) {\n      e.persist();\n\n      _this.ctx.clearRect(e.nativeEvent.offsetX, e.nativeEvent.offsetY, _this.props.size * 10, _this.props.size * 10);\n    };\n\n    _this.canvas = React.createRef();\n    return _this;\n  }\n\n  _createClass(Canvas, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.canvas = this.refs.canvas;\n      this.ctx = this.canvas.getContext(\"2d\");\n      var dpr = window.devicePixelRatio || 1;\n      var rect = this.canvas.getBoundingClientRect();\n      this.canvas.width = rect.width * dpr;\n      this.canvas.height = rect.height * dpr;\n      this.ctx.scale(dpr, dpr);\n      var statei = this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);\n      this.setState(function () {\n        return {\n          one_state_back: statei,\n          current_state: statei\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"canvas\", {\n        ref: \"canvas\",\n        className: classes.Canvas,\n        onMouseDown: this.MouseDown,\n        onMouseMove: this.MouseMove,\n        onMouseUp: this.MouseUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Canvas;\n}(Component);\n\nexport default Canvas;","map":{"version":3,"sources":["/Users/rozenmoon/Desktop/drawing_react_app/src/UI/Canvas/Canvas.js"],"names":["React","Component","classes","Erase","Canvas","props","state","mousedown","startX","startY","endX","endY","one_state_back","current_state","quardStartX","quardStartY","activity","toggleActivityHandeller","MouseDown","e","persist","statei","ctx","getImageData","canvas","width","height","setState","nativeEvent","offsetX","offsetY","MouseEnter","CanvasMouseEnter","MouseMove","Task","clearCanvas","activationFunction","LineTask","MouseUp","drawLine","drawQuard","pencil","ShapeTask","drawRect","drawCircle","eraser","clearRect","putImageData","beginPath","moveTo","lineTo","lineWidth","size","stroke","console","log","arc","Distance","Math","PI","rect","quadraticCurveTo","radius","sqrt","pow","createRef","refs","getContext","dpr","window","devicePixelRatio","getBoundingClientRect","scale"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,KAAP,MAAkB,sBAAlB;;IAGMC,M;;;;;AAkBF,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,gFAAMA,KAAN;AADe,UAjBnBC,KAiBmB,GAjBZ;AACHC,MAAAA,SAAS,EAAE,KADR;AAEHC,MAAAA,MAAM,EAAE,CAFL;AAGHC,MAAAA,MAAM,EAAE,CAHL;AAIHC,MAAAA,IAAI,EAAE,CAJH;AAKHC,MAAAA,IAAI,EAAE,CALH;AAMHC,MAAAA,cAAc,EAAE,IANb;AAOHC,MAAAA,aAAa,EAAE,IAPZ;AASHC,MAAAA,WAAW,EAAE,CATV;AAUHC,MAAAA,WAAW,EAAE,CAVV;AAWHC,MAAAA,QAAQ,EAAE;AAXP,KAiBY;;AAAA,UAkBnBC,uBAlBmB,GAkBO;AAAA,aAAO,CAAC,MAAKX,KAAL,CAAWU,QAAnB;AAAA,KAlBP;;AAAA,UAqBnBE,SArBmB,GAqBP,UAACC,CAAD,EAAO;AACfA,MAAAA,CAAC,CAACC,OAAF;;AACA,UAAMC,MAAM,GAAG,MAAKC,GAAL,CAASC,YAAT,CAAsB,CAAtB,EAAwB,CAAxB,EAA0B,MAAKC,MAAL,CAAYC,KAAtC,EAA4C,MAAKD,MAAL,CAAYE,MAAxD,CAAf;;AACA,YAAKC,QAAL,CAAc;AAACX,QAAAA,QAAQ,EAAC,MAAKC,uBAAL,EAAV;AAA2CV,QAAAA,SAAS,EAAG,IAAvD;AAA6DC,QAAAA,MAAM,EAAEW,CAAC,CAACS,WAAF,CAAcC,OAAnF;AAA4FpB,QAAAA,MAAM,EAAEU,CAAC,CAACS,WAAF,CAAcE,OAAlH;AAA2HlB,QAAAA,cAAc,EAAES,MAA3I;AAAmJX,QAAAA,IAAI,EAAES,CAAC,CAACS,WAAF,CAAcC,OAAvK;AAAgLlB,QAAAA,IAAI,EAAEQ,CAAC,CAACS,WAAF,CAAcE;AAApM,OAAd;AAEH,KA1BkB;;AAAA,UA4BnBC,UA5BmB,GA4BN,UAACZ,CAAD,EAAO;AAChBA,MAAAA,CAAC,CAACC,OAAF;;AACA,YAAKf,KAAL,CAAW2B,gBAAX,CAA4B,IAA5B;AACH,KA/BkB;;AAAA,UAiCnBC,SAjCmB,GAiCP,UAACd,CAAD,EAAO;AACfA,MAAAA,CAAC,CAACC,OAAF;;AACA,UAAG,MAAKd,KAAL,CAAWU,QAAX,IAAuB,MAAKV,KAAL,CAAWC,SAArC,EACA;AACI,YAAG,MAAKF,KAAL,CAAW6B,IAAX,IAAmB,MAAnB,IAA6B,MAAK7B,KAAL,CAAW6B,IAAX,IAAmB,OAAnD,EACA;AACI,gBAAKC,WAAL;AACH;;AACD,cAAKC,kBAAL,CAAwBjB,CAAxB;AACH;;AAED,UAAG,MAAKb,KAAL,CAAWU,QAAX,IAAuB,MAAKX,KAAL,CAAWgC,QAAX,KAAwB,WAAlD,EACI,MAAKD,kBAAL,CAAwBjB,CAAxB;AACP,KA9CkB;;AAAA,UAgDnBmB,OAhDmB,GAgDT,UAACnB,CAAD,EAAO;AAEb,UAAG,MAAKd,KAAL,CAAW6B,IAAX,IAAmB,MAAnB,IAA6B,MAAK7B,KAAL,CAAW6B,IAAX,IAAmB,OAAnD,EACA;AACI,cAAKC,WAAL;AACH;;AAEDhB,MAAAA,CAAC,CAACC,OAAF;;AACA,YAAKO,QAAL,CAAc;AAACX,QAAAA,QAAQ,EAAE,KAAX;AAAkBT,QAAAA,SAAS,EAAE,KAA7B;AAAoCG,QAAAA,IAAI,EAAES,CAAC,CAACS,WAAF,CAAcC,OAAxD;AAAiElB,QAAAA,IAAI,EAAEQ,CAAC,CAACS,WAAF,CAAcE;AAArF,OAAd,EAA6G;AAAA,eAAO,MAAKM,kBAAL,CAAwBjB,CAAxB,CAAP;AAAA,OAA7G;AACH,KAzDkB;;AAAA,UA2DnBiB,kBA3DmB,GA2DE,UAACjB,CAAD,EAAO;AACxB,UAAG,MAAKd,KAAL,CAAW6B,IAAX,KAAoB,MAAvB,EACA;AACI,YAAG,MAAK7B,KAAL,CAAWgC,QAAX,KAAwB,MAA3B,EACI,OAAO,MAAKE,QAAL,CAAcpB,CAAd,CAAP,CADJ,KAEK,IAAG,MAAKd,KAAL,CAAWgC,QAAX,KAAwB,WAA3B,EACD,OAAO,MAAKG,SAAL,CAAerB,CAAf,CAAP;AACP,OAND,MAQK,IAAG,MAAKd,KAAL,CAAW6B,IAAX,KAAoB,QAAvB,EACL;AACI,eAAO,MAAKO,MAAL,CAAYtB,CAAZ,CAAP;AACH,OAHI,MAIA,IAAG,MAAKd,KAAL,CAAW6B,IAAX,KAAoB,OAAvB,EACL;AACI,YAAG,MAAK7B,KAAL,CAAWqC,SAAX,KAAyB,WAA5B,EACI,OAAO,MAAKC,QAAL,CAAcxB,CAAd,CAAP,CADJ,KAEK,IAAG,MAAKd,KAAL,CAAWqC,SAAX,KAAyB,QAA5B,EACD,OAAO,MAAKE,UAAL,CAAgBzB,CAAhB,CAAP;AACP,OANI,MAOA,IAAG,MAAKd,KAAL,CAAW6B,IAAX,KAAoB,OAAvB,EACL;AACI,eAAO,MAAKW,MAAL,CAAY1B,CAAZ,CAAP;AACH;AACJ,KAnFkB;;AAAA,UAqFnBgB,WArFmB,GAqFL,YAAM;AAChB,YAAKR,QAAL,CAAc;AAAA,eAAO;AAACd,UAAAA,aAAa,EAAG,MAAKP,KAAL,CAAWM;AAA5B,SAAP;AAAA,OAAd;;AACA,YAAKU,GAAL,CAASwB,SAAT,CAAmB,CAAnB,EAAqB,CAArB,EAAuB,MAAKtB,MAAL,CAAYC,KAAnC,EAAyC,MAAKD,MAAL,CAAYE,MAArD;;AACA,YAAKJ,GAAL,CAASyB,YAAT,CAAsB,MAAKzC,KAAL,CAAWM,cAAjC,EAAgD,CAAhD,EAAkD,CAAlD;AACH,KAzFkB;;AAAA,UA2FnB2B,QA3FmB,GA2FR,UAACpB,CAAD,EAAO;AACdA,MAAAA,CAAC,CAACC,OAAF;;AACA,YAAKO,QAAL,CAAc;AAACjB,QAAAA,IAAI,EAAES,CAAC,CAACS,WAAF,CAAcC,OAArB;AAA8BlB,QAAAA,IAAI,EAAEQ,CAAC,CAACS,WAAF,CAAcE;AAAlD,OAAd,EAA0E,YAAM;AAC5E,cAAKR,GAAL,CAAS0B,SAAT;;AACA,cAAK1B,GAAL,CAAS2B,MAAT,CAAgB,MAAK3C,KAAL,CAAWE,MAA3B,EAAkC,MAAKF,KAAL,CAAWG,MAA7C;;AACA,cAAKa,GAAL,CAAS4B,MAAT,CAAgB,MAAK5C,KAAL,CAAWI,IAA3B,EAAgC,MAAKJ,KAAL,CAAWK,IAA3C;;AACA,cAAKW,GAAL,CAAS6B,SAAT,GAAqB,MAAK9C,KAAL,CAAW+C,IAAhC;;AACA,cAAK9B,GAAL,CAAS+B,MAAT;AACH,OAND;;AAQA,YAAK1B,QAAL,CAAc;AAAA,eAAO;AAACd,UAAAA,aAAa,EAAG,MAAKS,GAAL,CAASC,YAAT,CAAsB,CAAtB,EAAwB,CAAxB,EAA0B,MAAKC,MAAL,CAAYC,KAAtC,EAA4C,MAAKD,MAAL,CAAYE,MAAxD;AAAjB,SAAP;AAAA,OAAd;AACH,KAtGkB;;AAAA,UAwGnBkB,UAxGmB,GAwGN,UAACzB,CAAD,EAAM;AACfmC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACApC,MAAAA,CAAC,CAACC,OAAF;;AACA,YAAKO,QAAL,CAAc;AAACjB,QAAAA,IAAI,EAAES,CAAC,CAACS,WAAF,CAAcC,OAArB;AAA8BlB,QAAAA,IAAI,EAAEQ,CAAC,CAACS,WAAF,CAAcE;AAAlD,OAAd,EAA0E,YAAM;AAC5E,cAAKR,GAAL,CAAS0B,SAAT;;AACA,cAAK1B,GAAL,CAASkC,GAAT,CAAa,MAAKlD,KAAL,CAAWE,MAAxB,EAA+B,MAAKF,KAAL,CAAWG,MAA1C,EAAiD,MAAKgD,QAAL,EAAjD,EAAiE,CAAjE,EAAmE,IAAEC,IAAI,CAACC,EAA1E;;AACA,cAAKrC,GAAL,CAAS6B,SAAT,GAAqB,MAAK9C,KAAL,CAAW+C,IAAhC;;AACA,cAAK9B,GAAL,CAAS+B,MAAT;AACH,OALD;;AAMA,YAAK1B,QAAL,CAAc;AAAA,eAAO;AAACd,UAAAA,aAAa,EAAG,MAAKS,GAAL,CAASC,YAAT,CAAsB,CAAtB,EAAwB,CAAxB,EAA0B,MAAKC,MAAL,CAAYC,KAAtC,EAA4C,MAAKD,MAAL,CAAYE,MAAxD;AAAjB,SAAP;AAAA,OAAd;AACH,KAlHkB;;AAAA,UAoHnBiB,QApHmB,GAoHR,UAACxB,CAAD,EAAO;AACdA,MAAAA,CAAC,CAACC,OAAF;;AACA,YAAKO,QAAL,CAAc;AAACjB,QAAAA,IAAI,EAAES,CAAC,CAACS,WAAF,CAAcC,OAArB;AAA8BlB,QAAAA,IAAI,EAAEQ,CAAC,CAACS,WAAF,CAAcE;AAAlD,OAAd,EAAyE,YAAK;AAC1E,cAAKR,GAAL,CAAS0B,SAAT;;AACA,cAAK1B,GAAL,CAASsC,IAAT,CAAc,MAAKtD,KAAL,CAAWE,MAAzB,EAAgC,MAAKF,KAAL,CAAWG,MAA3C,EAAoD,MAAKH,KAAL,CAAWI,IAAX,GAAgB,MAAKJ,KAAL,CAAWE,MAA/E,EAAwF,MAAKF,KAAL,CAAWK,IAAX,GAAgB,MAAKL,KAAL,CAAWG,MAAnH;;AACA,cAAKa,GAAL,CAAS6B,SAAT,GAAqB,MAAK9C,KAAL,CAAW+C,IAAhC;;AACA,cAAK9B,GAAL,CAAS+B,MAAT;AACH,OALD;;AAMA,YAAK1B,QAAL,CAAc;AAAA,eAAO;AAACd,UAAAA,aAAa,EAAG,MAAKS,GAAL,CAASC,YAAT,CAAsB,CAAtB,EAAwB,CAAxB,EAA0B,MAAKC,MAAL,CAAYC,KAAtC,EAA4C,MAAKD,MAAL,CAAYE,MAAxD;AAAjB,SAAP;AAAA,OAAd;AACH,KA7HkB;;AAAA,UA+HnBc,SA/HmB,GA+HP,UAACrB,CAAD,EAAO;AACfA,MAAAA,CAAC,CAACC,OAAF;;AACA,YAAKO,QAAL,CAAc;AAACb,QAAAA,WAAW,EAAEK,CAAC,CAACS,WAAF,CAAcC,OAA5B;AAAqCd,QAAAA,WAAW,EAAEI,CAAC,CAACS,WAAF,CAAcE;AAAhE,OAAd,EAAuF,YAAK;AACxF,cAAKR,GAAL,CAAS0B,SAAT;;AACA,cAAK1B,GAAL,CAAS2B,MAAT,CAAgB,MAAK3C,KAAL,CAAWE,MAA3B,EAAkC,MAAKF,KAAL,CAAWG,MAA7C;;AACA,cAAKa,GAAL,CAASuC,gBAAT,CAA0B,MAAKvD,KAAL,CAAWQ,WAArC,EAAiD,MAAKR,KAAL,CAAWS,WAA5D,EAAwE,MAAKT,KAAL,CAAWI,IAAnF,EAAwF,MAAKJ,KAAL,CAAWK,IAAnG;;AACA,cAAKW,GAAL,CAAS6B,SAAT,GAAqB,MAAK9C,KAAL,CAAW+C,IAAhC;;AACA,cAAK9B,GAAL,CAAS+B,MAAT;AACH,OAND;;AAOA,YAAK1B,QAAL,CAAc;AAAA,eAAO;AAACd,UAAAA,aAAa,EAAG,MAAKS,GAAL,CAASC,YAAT,CAAsB,CAAtB,EAAwB,CAAxB,EAA0B,MAAKC,MAAL,CAAYC,KAAtC,EAA4C,MAAKD,MAAL,CAAYE,MAAxD;AAAjB,SAAP;AAAA,OAAd;AACH,KAzIkB;;AAAA,UA4InBe,MA5ImB,GA4IV,UAACtB,CAAD,EAAO;AACZA,MAAAA,CAAC,CAACC,OAAF;;AACA,YAAKO,QAAL,CAAc;AAACnB,QAAAA,MAAM,EAAE,MAAKF,KAAL,CAAWI,IAApB;AAA0BD,QAAAA,MAAM,EAAE,MAAKH,KAAL,CAAWK,IAA7C;AAAmDD,QAAAA,IAAI,EAAES,CAAC,CAACS,WAAF,CAAcC,OAAvE;AAAgFlB,QAAAA,IAAI,EAAEQ,CAAC,CAACS,WAAF,CAAcE;AAApG,OAAd,EAA4H,YAAM;AAC9H,cAAKR,GAAL,CAAS0B,SAAT;;AACA,cAAK1B,GAAL,CAAS2B,MAAT,CAAgB,MAAK3C,KAAL,CAAWE,MAA3B,EAAkC,MAAKF,KAAL,CAAWG,MAA7C;;AACA,cAAKa,GAAL,CAAS4B,MAAT,CAAgB,MAAK5C,KAAL,CAAWI,IAA3B,EAAgC,MAAKJ,KAAL,CAAWK,IAA3C;;AACA,cAAKW,GAAL,CAAS6B,SAAT,GAAqB,MAAK9C,KAAL,CAAW+C,IAAhC;;AACA,cAAK9B,GAAL,CAAS+B,MAAT;AACH,OAND;;AAOA,YAAK1B,QAAL,CAAc;AAAA,eAAO;AAACd,UAAAA,aAAa,EAAG,MAAKS,GAAL,CAASC,YAAT,CAAsB,CAAtB,EAAwB,CAAxB,EAA0B,MAAKC,MAAL,CAAYC,KAAtC,EAA4C,MAAKD,MAAL,CAAYE,MAAxD;AAAjB,SAAP;AAAA,OAAd;AACH,KAtJkB;;AAAA,UAyJnB+B,QAzJmB,GAyJR,YAAM;AACb,UAAMK,MAAM,GAAGJ,IAAI,CAACK,IAAL,CAAUL,IAAI,CAACM,GAAL,CAAU,MAAK1D,KAAL,CAAWE,MAAX,GAAoB,MAAKF,KAAL,CAAWI,IAAzC,EAA8C,CAA9C,IAAmDgD,IAAI,CAACM,GAAL,CAAU,MAAK1D,KAAL,CAAWG,MAAX,GAAoB,MAAKH,KAAL,CAAWK,IAAzC,EAA8C,CAA9C,CAA7D,CAAf;AACA2C,MAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ;AACA,aAAOA,MAAP;AACH,KA7JkB;;AAAA,UA+JnBjB,MA/JmB,GA+JV,UAAC1B,CAAD,EAAO;AACZA,MAAAA,CAAC,CAACC,OAAF;;AACA,YAAKE,GAAL,CAASwB,SAAT,CAAmB3B,CAAC,CAACS,WAAF,CAAcC,OAAjC,EAAyCV,CAAC,CAACS,WAAF,CAAcE,OAAvD,EAA+D,MAAKzB,KAAL,CAAW+C,IAAX,GAAgB,EAA/E,EAAkF,MAAK/C,KAAL,CAAW+C,IAAX,GAAgB,EAAlG;AACH,KAlKkB;;AAEf,UAAK5B,MAAL,GAAcxB,KAAK,CAACiE,SAAN,EAAd;AAFe;AAIlB;;;;wCAEkB;AACf,WAAKzC,MAAL,GAAc,KAAK0C,IAAL,CAAU1C,MAAxB;AACA,WAAKF,GAAL,GAAW,KAAKE,MAAL,CAAY2C,UAAZ,CAAuB,IAAvB,CAAX;AACA,UAAMC,GAAG,GAAGC,MAAM,CAACC,gBAAP,IAA2B,CAAvC;AACA,UAAMV,IAAI,GAAG,KAAKpC,MAAL,CAAY+C,qBAAZ,EAAb;AACA,WAAK/C,MAAL,CAAYC,KAAZ,GAAoBmC,IAAI,CAACnC,KAAL,GAAa2C,GAAjC;AACA,WAAK5C,MAAL,CAAYE,MAAZ,GAAqBkC,IAAI,CAAClC,MAAL,GAAc0C,GAAnC;AACA,WAAK9C,GAAL,CAASkD,KAAT,CAAeJ,GAAf,EAAoBA,GAApB;AACA,UAAM/C,MAAM,GAAG,KAAKC,GAAL,CAASC,YAAT,CAAsB,CAAtB,EAAwB,CAAxB,EAA0B,KAAKC,MAAL,CAAYC,KAAtC,EAA4C,KAAKD,MAAL,CAAYE,MAAxD,CAAf;AACA,WAAKC,QAAL,CAAc;AAAA,eAAO;AAACf,UAAAA,cAAc,EAAES,MAAjB;AAAyBR,UAAAA,aAAa,EAAEQ;AAAxC,SAAP;AAAA,OAAd;AACH;;;6BAoJI;AAEL,aAAO;AACC,QAAA,GAAG,EAAG,QADP;AAEC,QAAA,SAAS,EAAGnB,OAAO,CAACE,MAFrB;AAGC,QAAA,WAAW,EAAG,KAAKc,SAHpB;AAIC,QAAA,WAAW,EAAG,KAAKe,SAJpB;AAKC,QAAA,SAAS,EAAE,KAAKK,OALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AAOC;;;;EA/LgBrC,S;;AAkMrB,eAAeG,MAAf","sourcesContent":["import React, {Component} from 'react'\nimport classes from './Canvas.css'\nimport Erase from '../Tools/Erase/Erase'\n\n\nclass Canvas extends Component {\n    state= {\n        mousedown: false,\n        startX: 0,\n        startY: 0,\n        endX: 0,\n        endY: 0,\n        one_state_back: null,\n        current_state: null,\n\n        quardStartX: 0,\n        quardStartY: 0,\n        activity: false\n    }\n\n    canvas;\n    ctx;\n\n    constructor(props) {\n        super(props);\n        this.canvas = React.createRef();\n        \n    }\n\n    componentDidMount(){\n        this.canvas = this.refs.canvas;\n        this.ctx = this.canvas.getContext(\"2d\");\n        const dpr = window.devicePixelRatio || 1;\n        const rect = this.canvas.getBoundingClientRect();\n        this.canvas.width = rect.width * dpr;\n        this.canvas.height = rect.height * dpr;\n        this.ctx.scale(dpr, dpr);\n        const statei = this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);\n        this.setState(() => ({one_state_back: statei, current_state: statei}));\n    }\n\n    toggleActivityHandeller = () => (!this.state.activity);\n\n\n    MouseDown = (e) => {\n        e.persist();\n        const statei = this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);\n        this.setState({activity:this.toggleActivityHandeller() , mousedown : true, startX: e.nativeEvent.offsetX, startY: e.nativeEvent.offsetY, one_state_back: statei, endX: e.nativeEvent.offsetX, endY: e.nativeEvent.offsetY});\n        \n    }\n\n    MouseEnter = (e) => {\n        e.persist();\n        this.props.CanvasMouseEnter(true);\n    }\n\n    MouseMove = (e) => {\n        e.persist();\n        if(this.state.activity && this.state.mousedown)\n        {\n            if(this.props.Task == \"Line\" || this.props.Task == \"Shape\")\n            {\n                this.clearCanvas();\n            }\n            this.activationFunction(e);\n        }\n\n        if(this.state.activity && this.props.LineTask === \"QuardLine\")\n            this.activationFunction(e);\n    }\n\n    MouseUp = (e) => {\n\n        if(this.props.Task == \"Line\" || this.props.Task == \"Shape\")\n        {\n            this.clearCanvas();\n        }\n\n        e.persist();\n        this.setState({activity: false ,mousedown: false, endX: e.nativeEvent.offsetX, endY: e.nativeEvent.offsetY}, () => (this.activationFunction(e)));\n    }\n\n    activationFunction = (e) => {\n        if(this.props.Task === \"Line\")\n        {\n            if(this.props.LineTask === \"Line\")\n                return(this.drawLine(e));\n            else if(this.props.LineTask === \"QuardLine\")\n                return(this.drawQuard(e));\n        }\n\n        else if(this.props.Task === \"Pencil\")\n        {\n            return(this.pencil(e));\n        }\n        else if(this.props.Task === \"Shape\")\n        {   \n            if(this.props.ShapeTask === \"Rectangle\")\n                return(this.drawRect(e));\n            else if(this.props.ShapeTask === \"Circle\")\n                return(this.drawCircle(e));\n        }\n        else if(this.props.Task === \"Erase\")\n        {\n            return(this.eraser(e));\n        }\n    }\n\n    clearCanvas = () => {\n        this.setState(() => ({current_state : this.state.one_state_back}));\n        this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);\n        this.ctx.putImageData(this.state.one_state_back,0,0);\n    }\n\n    drawLine = (e) => {\n        e.persist();\n        this.setState({endX: e.nativeEvent.offsetX, endY: e.nativeEvent.offsetY}, () => { \n            this.ctx.beginPath();\n            this.ctx.moveTo(this.state.startX,this.state.startY);\n            this.ctx.lineTo(this.state.endX,this.state.endY);\n            this.ctx.lineWidth = this.props.size;\n            this.ctx.stroke();\n        });\t\t\n\n        this.setState(() => ({current_state : this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}));\n    }\n\n    drawCircle = (e) =>{\n        console.log(\"Circle\");\n        e.persist();\n        this.setState({endX: e.nativeEvent.offsetX, endY: e.nativeEvent.offsetY}, () => {\n            this.ctx.beginPath();\n            this.ctx.arc(this.state.startX,this.state.startY,this.Distance(),0,2*Math.PI);\n            this.ctx.lineWidth = this.props.size;\n            this.ctx.stroke();\n        });\n        this.setState(() => ({current_state : this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}));\n    }\n\n    drawRect = (e) => {\n        e.persist();\n        this.setState({endX: e.nativeEvent.offsetX, endY: e.nativeEvent.offsetY},()=> {\n            this.ctx.beginPath();\n            this.ctx.rect(this.state.startX,this.state.startY, (this.state.endX-this.state.startX),(this.state.endY-this.state.startY));\n            this.ctx.lineWidth = this.props.size;\n            this.ctx.stroke();\n        });\n        this.setState(() => ({current_state : this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}));\n    }\n\n    drawQuard = (e) => {\n        e.persist();\n        this.setState({quardStartX: e.nativeEvent.offsetX, quardStartY: e.nativeEvent.offsetY},()=> {\n            this.ctx.beginPath();\n            this.ctx.moveTo(this.state.startX,this.state.startY);\n            this.ctx.quadraticCurveTo(this.state.quardStartX,this.state.quardStartY,this.state.endX,this.state.endY);\n            this.ctx.lineWidth = this.props.size;\n            this.ctx.stroke();  \n        }); \n        this.setState(() => ({current_state : this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}));\n    }\n\n\n    pencil = (e) => {\n        e.persist();\n        this.setState({startX: this.state.endX, startY: this.state.endY, endX: e.nativeEvent.offsetX, endY: e.nativeEvent.offsetY}, () => {\n            this.ctx.beginPath();\n            this.ctx.moveTo(this.state.startX,this.state.startY);\n            this.ctx.lineTo(this.state.endX,this.state.endY);\n            this.ctx.lineWidth = this.props.size;\n            this.ctx.stroke();\n        });\n        this.setState(() => ({current_state : this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}));     \n    }\n\n\n    Distance = () => {\n        const radius = Math.sqrt(Math.pow( this.state.startX - this.state.endX,2) + Math.pow( this.state.startY - this.state.endY,2));\n        console.log(radius);\n        return radius;\n    }\n\n    eraser = (e) => {\n        e.persist();\n        this.ctx.clearRect(e.nativeEvent.offsetX,e.nativeEvent.offsetY,this.props.size*10,this.props.size*10);    \n    }\n\n render(){\n\n    return(<canvas \n            ref = \"canvas\" \n            className= {classes.Canvas} \n            onMouseDown ={this.MouseDown} \n            onMouseMove= {this.MouseMove} \n            onMouseUp={this.MouseUp} ></canvas>);\n\n    }   \n\n}\nexport default Canvas;"]},"metadata":{},"sourceType":"module"}